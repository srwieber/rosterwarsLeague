<style>
#draftHistortable th,#draftHistortable td{text-align:left;}
#draftHistortable th:nth-child(1),#draftHistortable td:nth-child(1),#draftHistortable th:nth-child(2),#draftHistortable td:nth-child(2),#draftHistortable th:nth-child(7),#draftHistortable td:nth-child(7),#draftHistortable th.ctd-pts,#draftHistortable td.ctd-pts{text-align:center}
#draftHistortable .franchiseicon[src*="mini-"]{width:unset!important;min-width:unset!important;max-width:unset!important;height:unset!important;min-height:unset!important;max-height:unset!important;max-width:250px!important;min-width:130px!important}
#draftHistortable .franchiseicon{height:auto;height:100%;width:auto;max-height:40px}
#draftHistortable th:nth-child(5),#draftHistortable th:nth-child(6),#draftHistortable th.comments-col{pointer-events:none!important;background-image:none!important}
#draftHistortable.tablesorter th{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
#draftHistortable.tablesorter th:focus{outline:none!important}
#draftHistortable th:nth-child(1){width:60px}
#draftHistortable td:last-child{white-space:pre-wrap}
#draftHistortable th{background-image:url(data:image/gif;base64,R0lGODlhFQAJAIAAAP///////yH5BAEAAAEALAAAAAAVAAkAAAIXjI+AywnaYnhUMoqt3gZXPmVg94yJVQAAOw==);background-repeat:no-repeat;background-position:center right;padding:5px 18px 5px 2px;white-space:normal;cursor:pointer}
#draftHistortable th:nth-child(2){width:50px}
/*#draft_options select{width:90px!important;font-size:14px!important;padding:0!important}*/
#draftHistortable .dh_comments_cell, #draftHistortable .dh_info_cell {display:none;position:absolute;z-index:99999;width:250px;margin-left:-240px;margin-top:20px;font-size:14px;padding:10px;text-align:left;border-radius:5px;background:#111;border: 4px solid #222;color:#fff;box-shadow:#000 -2px 2px 2px;}
#draftHistortable td.comments-col{cursor:pointer;text-align:center}
#draftHistortable th.comments-col{text-align:center;}
#draft_options select{pointer-events:auto}
#draft_options form{padding:0!important;font-size:12px}
#draft_options{/*display:none;*/padding:5px 0;text-align:center;line-height:0}
.dh-control-setting{font-size: 15px;cursor: pointer;font-weight: normal;display: inline}
#draftHistortable tr.totalscore-row td{background-image:none!important}
#draftHistortable th:nth-child(1){width:55px!important;max-width:55px!important}
#draftHistortable .ctd-pts{width:80px!important;max-width:80px!important}
/*#draftHistortable .comments-col{width:40px!important;max-width:40px!important}*/
#draftHistortable .comments-col {width:40px;}
#draftHistortable .points{width:100px!important;max-width:100px!important}
#draftHistortable .points + .points{width:80px!important;max-width:80px!important}
#draftHistortable .points:nth-child(2){width:50px!important;max-width:50px!important}
/*#draftHistortable .franchisename{width:200px!important;max-width:200px!important}*/
@media (hover:none) {#draft_options select{width:100px!important;font-size:16px!important;}}

.dh-control-setting{color: #fff}

#draftHistortable .points {text-align:right!important;}
#draftHistortable .fa-comments {color:#8d721e;font-size:12px!important;}
#draftHistortable .fa-info-circle {color:#555;font-size:12px;}

/*.dh_info_cell{display:none;position:absolute;margin-left:-250px;padding:5px;border-radius:5px;z-index:99999;float:left;width:250px;margin-top:8px}*/
/*#draftHistortable td.comments-col {display:none;}*/
#draftHistortable td.comments-col {font-size:0;}
#draftHistortable td.comments-col .dh_comments_cell_container {float:left;width:49%;}
#draftHistortable td.comments-col .dh_info_cell_container {float:right;width:49%;}
#draftHistortable td.comments-col .dh_comments_cell_container:hover .dh_comments_cell {display:block;cursor:pointer}
#draftHistortable td.comments-col .dh_info_cell_container:hover .dh_info_cell {display:block;cursor:pointer}
#draftHistortable .empty_comments {opacity:.0;cursor:default}
#draftHistortable .empty_info {opacity:.0;cursor:default}
#draftHistortable .totalscore-row td {padding:10px 2px;background:#300;text-align:right;}

#draft_options .reportnavigation {background:#000;color:#aaa;font-size:16px;text-align:center;}
#draft_tab_reports {padding:0;}
#draft-history-wrapper .report {padding-bottom:0;}
#draft-history-wrapper #draftHistortable {padding-bottom:10px;}

#draftHistortable td{height:40px;}

#draftHistortable .rating {text-transform: uppercase;}
#draftHistortable .rating .steal {color:#0f0;}
#draftHistortable .rating .good {color:#060;}
#draftHistortable .rating .avg {color:#aaa;}
#draftHistortable .rating .bad {color:#600;}
#draftHistortable .rating .bust {color:#f00;}
</style>

<!-- DRAFT HISTORY HTML -->
<div id="draft-history-wrapper" class="mobile-wrap"></div>

<!-- DRAFT HISTORY VAR SETTINGS -->
<script>
var load_draftHistory_script = true; 	//set to true to load the draft history script
var dh_Mobile = false;                	//set to true to display responsive css for draft table for stacked tablerows
var dh_Comments = true;               	//set to true to display the "Comments" column
var dh_sortArrow = 'white';           	//set to white or black for color of the sorting arrows in the table header - no other colors - white or black only
var dh_accumulatePts = true;         	//set to true to display accumulated pts from draft season selected and all future seasons (typically only useful for rookie drafts)
var dh_Ovr = false;                   	//set to true to display the "Ovr" column 	(default is turned off dont see need for this column)
var dh_Date = false;                  	//set to true to display the "Date/Time" column (default is turned off dont see need for this column)
var dh_Elapse = false;                	//set to true to display the "Elapsed" column 	(default is turned off dont see need for this column)
</script>

<!-- DRAFT HISTORY JS FILE -->
<!-- <script src="https://www.mflscripts.com/mfl-apps/history/draft/script.js"></script> -->

<script>
if((load_draftHistory_script) && ($('#draft-history-wrapper').length)) {

	///////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////
	//DO NOT EDIT BELOW HERE
	///////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////////////////////////////////////////////

	//DRAFT HISTORY VERSION NUMBER
//	console.log('DRAFT HISTORY LAST UPDATED 10-26-21');

	$("head").append('<scr'+'ipt type="text/javascript" src="https://www.mflscripts.com/mfl-apps/tableSort/script.js"></scr'+'ipt>');

	if (dh_Mobile === undefined) var dh_Mobile = false;
	if (dh_Ovr === undefined) var dh_Ovr = false;
	if (dh_Date === undefined) var dh_Date = false;
	if (dh_Elapse === undefined) var dh_Elapse = false;
	if (dh_Comments === undefined) var dh_Comments = false;
	if (dh_sortArrow === undefined) var dh_sortArrow = 'white';
	if (dh_accumulatePts === undefined) var dh_accumulatePts = false;

	//CREATE DRAFT HISTORY TABS
	var draftHistory_ar = [];
	var draftHistoryData_ar = [];
	var draftHistoryYtdPts_ar = [];
	var dh_decimals = 0;
	var dh_filterPosition = '';
	var dh_filterFranchise = '';
	var dh_filterHeader = '';
let draftYear;
	
	jQuery.get( baseURLDynamic + '/' + year + '/options?L=' + league_id + '&O=112&PRINTER=1', function( html ) {
		$(html).find('table.report.nocaption tr').each( function(){
			if($(this).find('td:eq(1) a').attr('href')!==undefined) {
				var history_url = $(this).find('td:eq(1) a').attr('href');
				//console.log(history_url.split('/')[3]+" "+history_url.split('/')[2].substr(3,2)+" "+history_url.split('/')[5].substr(0,5));
				draftHistory_ar.push( ({"yid":history_url.split('/')[3] , 'sid':history_url.split('/')[2].substr(3,2) , 'lid':history_url.split('/')[5].substr(0,5) }) );
				dh_getDraftTableLazyLoad(history_url.split('/')[3],history_url.split('/')[2].substr(3,2),history_url.split('/')[5].substr(0,5));
				if(dh_accumulatePts) dh_getYtdPtsLazyLoad(history_url.split('/')[3],history_url.split('/')[2].substr(3,2),history_url.split('/')[5].substr(0,5));
			}
		});
		dh_buildTabs();
		dh_getDraftTable(year,baseURLDynamic.split('/')[2].substr(3,2),league_id,true);
	});
	function dh_buildTabs(){
		var html='';
		html+='<div class="myfantasyleague_tabmenu">';
		html+='<span id="dh_title_11100" style="z-index:1">'+year+'</span><input id="dh_11100" type="checkbox"><label for="dh_11100"><span></span></label>';
		html+='<ul id="homepagetabs" class="dh-tabs-menu">';
//		html+='<li id="dh_11100" class="currenttab" onclick="dh_getDraftTable(\''+year+'\',\''+baseURLDynamic.split('/')[2].substr(3,2)+'\',\''+league_id+'\')"><a class="no-sub">'+year+'</a></li>';
		html+='<li id="dh_11100" onclick="dh_getDraftTable(\''+year+'\',\''+baseURLDynamic.split('/')[2].substr(3,2)+'\',\''+league_id+'\')"><a class="no-sub">'+year+'</a></li>';
		var tab_i=1;
		for (var i=draftHistory_ar.length-1;i>=0;i--){
			var tab_id = '0'+tab_i;
//			html+='<li id="dh_111'+tab_id.substr(-2)+'" class="" onclick="dh_getDraftTable(\''+draftHistory_ar[i].yid+'\',\''+draftHistory_ar[i].sid+'\',\''+draftHistory_ar[i].lid+'\')"><a>'+draftHistory_ar[i].yid+'</a></li>';
			html+='<li id="dh_111'+tab_id.substr(-2)+'" onclick="dh_getDraftTable(\''+draftHistory_ar[i].yid+'\',\''+draftHistory_ar[i].sid+'\',\''+draftHistory_ar[i].lid+'\')"><a>'+draftHistory_ar[i].yid+'</a></li>';
			tab_i++;
		}
		html+='</ul>';
		html+='</div>';

		html+='<div id="draft_options" class="mobile-wrap"></div>';

		html+='<div id="myfantasyleague_tabs" class="dh_tabs_wrap mobile-wrap"><table class="homepagemodule report" id="draft_tab_reports" cellspacing="1" align="center"><caption style="position:relative;display:table-caption;"><span class="dh-main-caption-span">'+year+' DRAFT RESULTS</span></caption><tbody></tbody></table>';
// <span><div id="dh_options_11100" class="dh-control-setting" style="">
// <div class="dh_toggle_settings" style="pointer-events:auto;float:right;margin-right:3px"><i class="fa fa-cogs" aria-hidden="true"></i> Filters</div><div id="draft_options"></div></div></span>
		html+='<div class="dh_toggle_tabs dh-main-toggle-tabs">';
		html+='</table>';
		html+='<div id="draft_loader"><center style="position:relative;height:200px;padding-top:20px">Loading Draft History . . .<br><br><div class="MFLPlayerPopupLoader" style="margin:0 auto"></div></center></div>';
		html+='<div class="dh_tabs_scroll" style="position:relative;display:none"></div>';
		html+='</div>';
		html+='</div>';
		$('#draft-history-wrapper').append(html);
	}

	function dh_doDraftTable(data,yid) {
		if(data == null){
			$('#draft-history-wrapper .report .nodraft').remove();
			$('#draft-history-wrapper .report tr:last-child').after('<tr class="nodraft"><td><h3 style="padding:30px 5px">No Draft Results For Selected Season</h3></td></tr>');
		}else{
			$('#draft-history-wrapper .report .nodraft').remove();
		}
		var formOptions = $(data).find('form[action="options"]').appendTo('#draft_options');
		$('#draft_options').html(formOptions);
		$(data).find('.report:first').appendTo('.dh_tabs_scroll').attr('id', 'draftHistortable').addClass('tablesorter');

		$('.dh_tabs_scroll th:last-child').each(function() {
    			if($(this).text().match('Comments')) {
			$('#draftHistortable tr:first th:last-child').addClass('comments-col');
			$('#draftHistortable tr.oddtablerow,#draftHistortable tr.eventablerow').each(function(){
				$(this).find('td:last-child').addClass('comments-col');
			});
    			} else {
			$('#draftHistortable tr:first th:last-child').after('<th class="comments-col">Comments</th>');
			$('#draftHistortable tr.oddtablerow,#draftHistortable tr.eventablerow').each(function(){
				$(this).find('td:last-child').after('<td class="comments-col"></td>');
			});
			}
		});

		if(parseInt(yid)!==year&&dh_accumulatePts) {
			$('#draftHistortable tr:first th:eq(6)').after('<th class="points ctd-pts" title="Career Pts to Date">Car Pts</th><th class="points rating" title="Draft Rating">Rating</th>');
			$('#draftHistortable tr.oddtablerow,#draftHistortable tr.eventablerow').each(function(){
				$(this).find('td:eq(6)').after('<td class="points ctd-pts"></td><td class="points rating"></td>');
			});
		}
		var dh_num = 0;
		$('#draftHistortable:first tr th').each(function () {
			if ($(this).attr('colspan')) {
				dh_num += +$(this).attr('colspan');
			} else {
				dh_num++;
			}
		});

		$('#draftHistortable caption').remove();
		$('#draftHistortable tr:first').wrap('<thead>');
		$('#draftHistortable thead').insertBefore('#draftHistortable tbody');
		$('<tbody style="display:none"><tr><td colspan=' + dh_num + '></td></tr></tbody>').insertBefore('#draftHistortable tbody');

		// Sum points
		$('#draftHistortable tbody:last tr td:nth-of-type(7)').addClass('totalpoints');
		let pointsum = 0;
		let pointsumr = 0;
		let ctdsum = 0;
		let ctdsumr = 0;

		if(parseInt(yid)!==year&&dh_accumulatePts) 
			$('<tfoot><tr class="totalscore-row"><td></td><td></td><td></td><td></td><td></td><td style="text-align:right!important;white-space:nowrap">Total Points:</td><td class="totalscore">' + pointsumr + '</td><td class="totalctdscore">' + ctdsumr + '</td><td></td><td class="last_total"></td></tr></tfoot>').insertAfter('#draftHistortable tbody:last');
		else
			$('<tfoot><tr class="totalscore-row"><td></td><td></td><td></td><td></td><td></td><td style="text-align:right!important;white-space:nowrap">Total Points:</td><td class="totalscore">' + pointsumr + '</td><td class="last_total"></td></tr></tfoot>').insertAfter('#draftHistortable tbody:last');

		$(function() {
			// sort documents https://mottie.github.io/tablesorter/docs/
			sumPoints(yid);
			// initialize the tablesorter plugin
			$("#draftHistortable").tablesorter();
			// bind to sort events
			$("#draftHistortable").bind("sortStart",function(e, table) {
      			//$("#overlay").show();
    		}).bind("sortEnd",function(e, table) {
      			sumPoints(yid);
    		});
		});

		$('#draft_options select[name="POSITION"] option').val(function (i, v) {
			return v.replace(/\+/g, ",tr.dr_pos_");
		});
		$('#draft_options select[name="POSITION"] option[value="*"]').text('Position');
		$('#draft_options select[name="FRANCHISE"] option[value="0000"]').text('Franchise');
		$('#draftHistortable td.points').text(function (i, v) {
			return v.replace("-", "0");
		});
		$('#draft_options form input[type="submit"]').remove();
		$("#draft-history-wrapper td.franchisename a").each(function () {
			var href = $(this).attr('href');
			var id = href.substr(href.indexOf("F=") + 2, 4);
			$(this).closest('tr').not('.totalscore-row').addClass('dr_fran_' + id);
		});
		$("#draft-history-wrapper td.player a").each(function () {
			var href = $(this).attr('class');
			var id = href.substr(href.indexOf("position_") + 9, href.length);
			$(this).closest('tr').not('.totalscore-row').addClass('fran_filtered pos_filtered dr_pos_' + id);
		});
		$('#draft_options select[name="POSITION"]').change(function () {
			if($(this).val()==='*') dh_filterPosition =''; else dh_filterPosition = $(this).val();
			var optionPos = $(this).val().toLowerCase();
			$('tr[class*="dr_pos_"]').removeClass('pos_filtered').hide();
			$('tr.dr_pos_' + optionPos).addClass('pos_filtered').show();
			$('tr[class*="dr_fran_"]').not('.fran_filtered').hide();
			if ($(this).val() == "*") {
				$('tr[class*="dr_pos_"]').addClass('pos_filtered').show();
				$('tr[class*="dr_pos_"]').not('.fran_filtered').hide();
			}
			sumPoints(yid);
		});
		$('#draft_options select[name="FRANCHISE"]').change(function () {
			var optionFran = $(this).val().toLowerCase();
			if(optionFran==='0000') dh_filterFranchise =''; else dh_filterFranchise = optionFran;
			$('tr[class*="dr_fran_"]').removeClass('fran_filtered').hide();
			$('tr.dr_fran_' + optionFran).addClass('fran_filtered').show();
			$('tr[class*="dr_fran_"]').not('.pos_filtered').hide();
			if ($(this).val() == "0000") {
				$('tr[class*="dr_fran_"]').addClass('fran_filtered').show();
				$('tr[class*="dr_fran_"]').not('.pos_filtered').hide();
			}
			sumPoints(yid);
		});

let dh_year;
// i don't think this exists
//		$('.dh-main-toggle-tabs li').click(function(){
//			$('.dh-main-toggle-tabs li').removeClass('currenttab');
//			$(this).addClass('currenttab');
//			dh_year = $(this).text();
//			$('.dh-main-toggle-tabs span[id*="dh_title_"]').html(dh_year);
//			$('#dh_11100').prop('checked',false);
//			$('.dh-main-caption-span').text(dh_year + ' Draft Results');
//		});
//let draftYear;
		if ($("#draftHistortable td.franchisename:first").length) {
			var getYear = $('#draftHistortable td.franchisename:first').find("a").attr("href");
//			var draftYear = getYear.substr(getYear.indexOf("com/") + 4, 4);
			draftYear = getYear.substr(getYear.indexOf("com/") + 4, 4);
			$('.dh-main-caption-span').text(draftYear + ' Draft Results');
			if (draftYear == year || draftYear == year -1 || draftYear == year -2) {
				$('#draftHistortable td a').attr('href', function (i, href) {
					return href.replace('&PRINTER=1', '');
				});
				$('#draft_style_pointer').remove();
				try {
					MFLPlayerPopupNewsIcon('draft-history-wrapper')
				} catch (er) {};
			} else {
				if ($("#draft_style_pointer").length == 0) {$('head').append('<style id="draft_style_pointer">#draft-history-wrapper table td a{pointer-events:none!important;text-decoration:none!important}</style>')}
			}
		} else {
			$('.dh-main-caption-span').text('No Draft For Selected Year');
			$('#draftHistortable').html('<h3 style="padding:30px 5px">No Draft Results For Selected Season</h3>');
		}
		
		if(parseInt(yid)!==year&&dh_accumulatePts) {
			dh_decimals = 0;
			$("#draftHistortable tbody:eq(1) tr").each(function(){
				try { var pid = $(this).find("td.player a").attr("href").replace("&PRINTER=1","").split("=")[2]; } catch(er) { var pid = ''; }
				var career_pts = 0;
				if(draftHistoryYtdPts_ar.hasOwnProperty("pid_"+pid)) {
					for (var year_key in draftHistoryYtdPts_ar["pid_"+pid]) {
						if(parseInt(year_key.substr(-4))>=parseInt(yid)) {
							try {if(draftHistoryYtdPts_ar["pid_"+pid][year_key].indexOf(".")!==-1) dh_decimals = draftHistoryYtdPts_ar["pid_"+pid][year_key].length - draftHistoryYtdPts_ar["pid_"+pid][year_key].indexOf(".") - 1;} catch(er) {}
							career_pts+= parseFloat(draftHistoryYtdPts_ar["pid_"+pid][year_key],10);
						}
					}
				}
				$(this).find("td.ctd-pts").html(career_pts.toFixed(dh_decimals));

				// ratings
				let rating = 0;
				let yearNum = year - parseInt(draftYear);
				let value = $('#draftHistortable tr:visible').length - $(this).find('.points:eq(0)').text();
				rating += ((career_pts / yearNum) - value) * .03;
				let ratingText;
				if (rating > 5) {ratingText = 'steal'}
				else if (rating > 3 && rating <= 5) {ratingText = 'good'}
				else if (rating > 1 && rating <= 3) {ratingText = 'avg'}
				else if (rating > .5 && rating <= 1) {ratingText = 'bad'}
				else if (rating <= .5) {ratingText = 'bust'}
				else {ratingText = 'unknown'}
//				$(this).find("td.rating").html(value);
//				$(this).find("td.rating").html(rating.toFixed(dh_decimals));
				$(this).find("td.rating").html('<span class="' + ratingText + '">' + ratingText + '</span>');
			});
		}
		$('#draft_loader').hide();
		$('.dh_tabs_scroll').show();
		$('#draftHistortable td.comments-col').html(function (i, html){return html.replace(/&nb/g, '');});
		$('#draftHistortable td.comments-col').html(function (i, html){return html.replace(/sp;/g, '');});
		$(function () {
		$('#draftHistortable td.comments-col').wrapInner('<div class="dh_comments_cell_container"></div>');
		$('#draftHistortable td.comments-col .dh_comments_cell_container').after('<div class="dh_info_cell_container"></div>');
		$('#draftHistortable td.comments-col').html(function(i, h) {
			return h.replace(/\[+([^\][]+)]+/g,"<div class='dh_info_cell'>$1</div>");
		});
		$('#draftHistortable td.comments-col').html(function(i, h) {
			return h.replace(/\(([^\)]+)\)/g, "(<div class='dh_info_cell'>$1</div>)"); 
		});
		$("#draftHistortable td.comments-col:contains('Pick made based on Pre-Draft List')").html(function(_, html) {
			return html.replace(/(Pick made based on Pre-Draft List)/g, '<div class="dh_info_cell">$1</div>');
		});
		$('#draftHistortable td.comments-col:contains("(")').each(function(){
			$(this).html($(this).html().split("(").join(""));
			$(this).html($(this).html().split(")").join(""));
		});
		$('#draftHistortable td.comments-col .dh_info_cell').each(function(){
			const theparent = $(this).closest('td').find('.dh_info_cell_container');
			$(this).appendTo(theparent);
		});
		$('#draftHistortable td.comments-col .dh_comments_cell_container br').remove();
			$('#draftHistortable td.comments-col .dh_comments_cell_container:empty').addClass('empty_comments');
			$('#draftHistortable td.comments-col .dh_comments_cell_container').not('.empty_comments').wrapInner('<div class="dh_comments_cell"></div>');
			$('#draftHistortable th.comments-col .dh_comments_cell_container').html('<i class="fa fa-comments" aria-hidden="true"></i>');
			$('#draftHistortable td.comments-col .dh_comments_cell_container').append('<i class="fa fa-comments" aria-hidden="true"></i>');	

			$('#draftHistortable td.comments-col .dh_info_cell_container:empty').addClass('empty_info');
			$('#draftHistortable th.comments-col .dh_info_cell_container').html('<i class="fa fa-info-circle" aria-hidden="true"></i>');
			$('#draftHistortable td.comments-col .dh_info_cell_container').append('<i class="fa fa-info-circle" aria-hidden="true"></i>')
	});

		// add franchise names when logos used so sort will work for franchise
		$('#draftHistortable td.franchisename img').each( function(){
			var alt = $(this).attr("alt");
			$(this).parents('td').append('<span style="display:none">'+alt+'</span>');
		});
		// if position or franchise filter has been set then re-filter
		if(dh_filterFranchise!=='') $('#draft_options select[name="FRANCHISE"]').val(dh_filterFranchise).trigger('change');
		if(dh_filterPosition!=='') $('#draft_options select[name="POSITION"]').val(dh_filterPosition).trigger('change');
	}
	function sumPoints(yid){
		pointsum = 0;
		pointsumr = 0;
		dh_decimals = 0;
		$('#draftHistortable tr .totalpoints:visible').each(function () {
			var val = $.trim($(this).text());
			if (val) {
				if(val.indexOf(".")!==-1) try {dh_decimals = val.length - val.indexOf(".")-1; } catch(er) {}
				val = parseFloat(val.replace(/^\$/, ""));
				pointsum += !isNaN(val) ? val : 0;
				pointsumr = pointsum.toFixed(dh_decimals);
			}
		});
		$('#draftHistortable tr .totalscore').html(pointsumr);
		if(parseInt(yid)!==year&&dh_accumulatePts) {
			ctdsum = 0;
			ctdsumr = 0;
			$('#draftHistortable tr .ctd-pts:visible').each(function () {
				var val = $.trim($(this).text());
				if (val) {
					val = parseFloat(val.replace(/^\$/, ""));
					ctdsum += !isNaN(val) ? val : 0;
					ctdsumr = ctdsum.toFixed(dh_decimals);
				}
			});
			$('#draftHistortable tr .totalctdscore').html(ctdsumr);
		}
		
		$('#draftHistortable tr:visible:odd').removeClass('eventablerow').addClass('oddtablerow');
		$('#draftHistortable tr:visible:even').removeClass('oddtablerow').addClass('eventablerow');
	}
	function dh_getDraftTable(yid,sid,lid,isInitial) {
		$('.dh_tabs_scroll').html(''); //CLEAR DIV
		if(isInitial) {
			var url = 'ht'+'tps://www'+sid+'.myfantasyleague.com/'+yid+'/options?L='+lid+'&O=17&PRINTER=1';
			jQuery.get(url, function (data) {
				draftHistoryData_ar["yid_"+yid] = data;
				dh_doDraftTable(data,yid);
				if(dh_accumulatePts) dh_getYtdPtsLazyLoad(yid,sid,lid);
			});
		} else {
			dh_doDraftTable(draftHistoryData_ar["yid_"+yid],yid);
		}
	}
	function dh_getDraftTableLazyLoad(yid,sid,lid) {
		var url = 'ht'+'tps://www'+sid+'.myfantasyleague.com/'+yid+'/options?L='+lid+'&O=17&PRINTER=1';
		jQuery.get(url, function (data) {
			draftHistoryData_ar["yid_"+yid] = data;
		});
	}
	function dh_getYtdPtsLazyLoad(yid,sid,lid) {
		var url = 'ht'+'tps://www'+sid+'.myfantasyleague.com/'+yid+'/export?TYPE=playerScores&L='+lid+'&APIKEY=&W=YTD&JSON=1';
		jQuery.ajax({
			url: url,
			success: function(data) {
				for (var i=0;i<data.playerScores.playerScore.length;i++) {
					if(!draftHistoryYtdPts_ar.hasOwnProperty("pid_"+data.playerScores.playerScore[i].id)) draftHistoryYtdPts_ar["pid_"+data.playerScores.playerScore[i].id] = [];
					draftHistoryYtdPts_ar["pid_"+data.playerScores.playerScore[i].id]["yid_"+yid] = data.playerScores.playerScore[i].score;
				}
			},
			async: true
		});
	}
	$(document).on('click', '.dh_toggle_settings', function () {
		$('#draft_options').slideToggle('slow');
	});
	if (dh_Mobile) {
		$('head').append('<style>@media (max-width:40.625em){#draftHistortable,#draftHistortable tbody,#draftHistortable th,#draftHistortable td,#draftHistortable tr{display:block}#draftHistortable tr[class*="dr_pos_"]{border-bottom:3px solid #111}#draftHistortable tr[class*="dr_pos_"]:last-child{border-bottom:0!important}#draftHistortable th{position:absolute;top:-9999px;left:-9999px}#draftHistortable td{position:relative;text-align:left!important;min-height:34px}#draftHistortable td:before{width:100px;text-align:right;display:inline-block;margin-right:10px}#draft-history-wrapper table.report td textarea{width:100%}#draftHistortable td:nth-of-type(1):before{content:"Pick\\00a0:\\00a0"}#draftHistortable td.points:before{content:"Overall Pick\\00a0:\\00a0"}#draftHistortable td.franchisename:before{content:"Franchise\\00a0:\\00a0"}#draftHistortable td.player:before{content:"Selection\\00a0:\\00a0"}#draftHistortable td.timestamp:before{content:"Date\/Time : "}#draftHistortable td.timestamp + td.points:before{content:"Elaspsed Time\\00a0:\\00a0"}#draftHistortable td.points + td.points:before{content:"Points\\00a0:\\00a0"}#draftHistortable td:last-of-type:before{content:"Comments\\00a0:\\00a0"}#draftHistortable td.franchisename{padding-left:113px}#draftHistortable td.franchisename:before{margin-left:-100px;padding-right:10px;margin-right:0}#draftHistortable td.comments-col{white-space:nowrap}#draftHistortable .dh_comments_cell{margin-left:133px;margin-top:-30px;width:200px;white-space:pre-wrap}tr.totalscore-row{display:none!important}#draftHistortable .franchisename,#draftHistortable .points:nth-child(2),#draftHistortable .points,#draftHistortable .points + .points{width: unset!important;max-width: unset!important}#draftHistortable td.ctd-pts:before{content: "CPts\\00a0:\\00a0"!important}}</style>');
	}
	if (!dh_Ovr) {
		$('head').append('<style>#draftHistortable th:nth-child(2),#draftHistortable td:nth-child(2){display:none!important}</style>');
	}
	if (!dh_Date) {
		$('head').append('<style>#draftHistortable th:nth-child(5),#draftHistortable td:nth-child(5){display:none!important}</style>');
	}
	if (!dh_Elapse) {
		$('head').append('<style>#draftHistortable th:nth-child(6),#draftHistortable td:nth-child(6){display:none!important}#draftHistortable .totalscore-row td:nth-child(6){display:table-cell!important}#draftHistortable .totalscore-row td:nth-child(4){display:none!important}</style>');
	}
	if (!dh_Comments) {
		$('head').append('<style>#draftHistortable th.comments-col,#draftHistortable td.comments-col{display:none!important}#draftHistortable tr.totalscore-row td.last_total{display:none!important}</style>');
	}
	if (dh_sortArrow == 'white') {
		$('head').append('<style>#draftHistortable.tablesorter .header,#draftHistortable.tablesorter .tablesorter-header{background-image:url(data:image/gif;base64,R0lGODlhFQAJAIAAAP///////yH5BAEAAAEALAAAAAAVAAkAAAIXjI+AywnaYnhUMoqt3gZXPmVg94yJVQAAOw==);background-repeat:no-repeat;background-position:center right;padding:5px 18px 5px 5px;white-space:normal;cursor:pointer}#draftHistortable.tablesorter .headerSortUp,#draftHistortable.tablesorter .tablesorter-headerSortUp,#draftHistortable.tablesorter .tablesorter-headerAsc{background-image:url(data:image/gif;base64,R0lGODlhFQAEAIAAAP///////yH5BAEAAAEALAAAAAAVAAQAAAINjI8Bya2wnINUMopZAQA7)}#draftHistortable.tablesorter .headerSortDown,#draftHistortable.tablesorter .tablesorter-headerSortDown,#draftHistortable.tablesorter .tablesorter-headerDesc{background-image:url(data:image/gif;base64,R0lGODlhFQAEAIAAAP///////yH5BAEAAAEALAAAAAAVAAQAAAINjB+gC+jP2ptn0WskLQA7)}</style>')
	}
	if (dh_sortArrow == 'black') {
		$('head').append('<style>#draftHistortable.tablesorter .header,#draftHistortable.tablesorter .tablesorter-header{background-image:url(data:image/gif;base64,R0lGODlhFQAJAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAkAAAIXjI+AywnaYnhUMoqt3gZXPmVg94yJVQAAOw==);background-repeat:no-repeat;background-position:center right;padding:2px 18px 2px 2px;white-space:normal;cursor:pointer}#draftHistortable.tablesorter .headerSortUp,#draftHistortable.tablesorter .tablesorter-headerSortUp,#draftHistortable.tablesorter .tablesorter-headerAsc{background-image:url(data:image/gif;base64,R0lGODlhFQAEAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAQAAAINjI8Bya2wnINUMopZAQA7)}#draftHistortable.tablesorter .headerSortDown,#draftHistortable.tablesorter .tablesorter-headerSortDown,#draftHistortable.tablesorter .tablesorter-headerDesc{background-image:url(data:image/gif;base64,R0lGODlhFQAEAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAQAAAINjB+gC+jP2ptn0WskLQA7)}</style>')
	}
}

</script>
